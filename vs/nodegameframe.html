<script>
function receiveMessage(event) {
  var id;
  id = event.data;

  // Back compatibility naming.
  if (id === "closeQSIWindow" || id === "quit") {
    quit();
  }
  // Back compatibility naming.
  else if (id === "popupConsent" || id === "requestConsent") {
    if (REQUEST_CONSENT) requestConsent();
    else console.log("consent form not shown. check the game settings.");
  }
  else if (id === "experimentComplete") {
    experimentComplete();
  }
  else {
    console.log('Received unknown post message:', event.data);
  }
}

function initialize() {
  var link, extraVars;

  // Add post messages listener.
  window.addEventListener("message", receiveMessage, false);

  // Default link.
  link = 'https://nodesim.org;

  // Extra variables.
  if ('undefined' !== typeof seed && 'undefined' !== typeof myid) {
    extraVars = '?gid=' + seed + '&sid=' + myid;
  }
  // Autoplay (if permitted by server).
  extraVars += '&clientType=autoplay';

  // Create full link.
  link += extraVars;

  // Connect iframe.
  document.getElementById("nodegameframe").src = link;
}
</script>
<iframe id="nodegameframe" src="#" style="width:100%; height:800px"></iframe>
