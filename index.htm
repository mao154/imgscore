<!doctype html>
<title>Picture Categorization</title>

<!-- Loading  nodeGame libraries and CSS -->
<script src="/socket.io/socket.io.js"></script> 
<script src="/javascripts/nodegame-full.js" charset="utf-8"></script>
<link rel='stylesheet' href='/stylesheets/fullheight.css'></link>
<link rel='stylesheet' href='/stylesheets/noscript.css'></link>
<!-- end -->
<body>
<!-- <iframe id="mainframe" name="mainframe"></iframe> -->
<noscript>
  Sorry, you need to enable javascript in order to play this game.
</noscript>
<script>
  window.onload = function () {
  J = JSUS;
  JSUS.sample = function(a, b) {
        var out;
        out = JSUS.seq(a,b)
        if (!out) return false;
        return JSUS.shuffle(out);
    }

  JSUS.shuffleNodes = function(parent, order) {
        var i, len, idOrder;
        if (!JSUS.isNode(parent)) {
            throw new TypeError('DOM.shuffleNodes: parent must node.');
        }
        if (!parent.children || !parent.children.length) {
            JSUS.log('DOM.shuffleNodes: parent has no children.', 'ERR');
            return false;
        }
        if (order) {
            if (!J.isArray(order)) {
                throw new TypeError('DOM.shuffleNodes: order must array.');
            }
            if (order.length !== parent.children.length) {
                throw new Error('DOM.shuffleNodes: order length must match ' + 
                                'the number of children nodes.');
            }
        }

        len = parent.children.length, idOrder = [];
        if (!order) order = JSUS.sample(0,len);
        for (i = 0 ; i < len; i++) {
            idOrder.push(parent.children[order[i]].id);
        }
        // Two fors are necessary to follow the real sequence.
        // However parent.children is a special object, so the sequence could be
        // unreliable.
        for (i = 0 ; i < len; i++) {
            parent.appendChild(parent.children[idOrder[i]]);
        }
        
        return idOrder;
    };



      
      // Configuring nodegame
      node.setup('nodegame', {	  
	  verbosity: 100,
	  debug: true,
	  window: {
	      promptOnleave: false,
              noEscape: true
	  },
	  env: {
	      auto: false,
	      debug: false
	  },
	  events: {
	      dumpEvents: true
	  },
	  socket: {
	      type: 'SocketIo',
	      reconnect: true
	  }
      });
      
      // connecting
      node.connect("/facecat");
  }
</script>
</body>
